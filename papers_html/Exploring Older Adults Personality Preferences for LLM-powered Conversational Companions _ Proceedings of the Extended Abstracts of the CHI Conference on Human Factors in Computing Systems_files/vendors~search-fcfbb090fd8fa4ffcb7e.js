(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1049:function(m,y,b){"use strict";b.r(y);b(1050),b(1051),b(1052),b(1054);var _=b(1062);b(1056);y.default=function main(m){var y=Array.prototype.slice.call(document.getElementsByClassName("facet")),b=Array.prototype.slice.call(document.getElementsByClassName("range-slider")),C=Array.prototype.slice.call(document.getElementsByClassName("facetDateChart")),$=Array.prototype.slice.call(document.querySelectorAll(".refineSearch,.advanced-search")),R=document.querySelector(".advanced-search"),I=Array.prototype.slice.call(document.querySelectorAll(".search-result,.search__sort,.event__content"));try{y.length&&m.toggle.init(y)}catch(m){console.error(m)}try{b.length&&m.facetDate.init(b)}catch(m){console.error(m)}try{C.length&&m.facetDateChart.init(C)}catch(m){console.error(m)}try{$.length&&m.refine.init($)}catch(m){console.error(m)}try{R&&(m.advancedSearch=new _.a(R).initialize())}catch(m){console.error(m)}try{I.length&&m.searchResult.init(I)}catch(m){console.error(m)}}},1050:function(m,y){var b,_;b=$("body"),_={$toggle:$(".facet:not(.displayAll)"),lessLabel:"Less",moreLabel:"More",init:function init(){_.setLabels(),_.on.build(),_.control(),_.additionalControls()},control:function control(){b.on("click",".facet .show-more",(function(m){m.preventDefault(),_.on.toggle($(this))})),b.find(".facet .dropdown__toggle").off(),b.on("click",".facet .dropdown__toggle",(function(m){m.preventDefault(),_.on.toggleFacet($(this))}))},additionalControls:function additionalControls(){},setLabels:function setLabels(){var m=$("#filter");m.length&&(_.moreLabel=m.data("more-text")?m.data("more-text"):_.moreLabel,_.lessLabel=m.data("less-text")?m.data("less-text"):_.lessLabel)},on:{build:function build(){_.$toggle.each((function(){var m=$(this).find("ul.facet__list"),y=m.children("li"),b=$(this).find(".facet__select ").children("option"),C=y.length,R=b.length,I=m.find("[name=facet-shown-items]").val()||5,P=C>I,F=R+C-I;m.find("[name=facet-hidden-items]").length&&(F=m.find("[name=facet-hidden-items]").val()),m.closest(".facet").attr("data-more-count",F),P&&m.after(_.get.showMore(F))}))},toggle:function toggle(m){var y=m.closest(".facet");y.find("ul.facet__list").find(".js--toggle").slideToggle(),y.find(".facet__select--hidden").toggle(),m.toggleClass("js--open"),m.hasClass("js--open")?(m.html(_.lessLabel+'<i class="icon-section_arrow_u" aria-hidden="true"></i>'),m.closest(".accordion__content").find("li.js--toggle")[0].firstElementChild.focus(),m.attr("aria-expanded",!0)):(m.html(_.moreLabel+' <span  class="more-count">('+y.data("more-count")+')</span> <i class="icon-section_arrow_d" aria-hidden="true"></i>'),m.closest(".accordion__content").find("li:first-child a").blur(),m.attr("aria-expanded",!1))},toggleFacet:function toggleFacet(m){var y=m.closest("li").children("ul.facet-dropdown__menu");y.slideToggle(),m.toggleClass("js--open"),m.find("i").toggleClass("icon-add_box icon-squared-minus"),m.hasClass("js--open")?y.attr("aria-hidden",!1):y.attr("aria-hidden",!0)}},get:{showMore:function showMore(m){return'<a href="#" class="show-more" aria-expanded="false" rel="nofollow"> '.concat(_.moreLabel,' <span class="more-count">(').concat(m,')</span> <i class="icon-section_arrow_d" aria-hidden="true"></i></a>')}}},UX.toggle=_},1051:function(m,y,b){var _,C;_=$("body"),(C={sliderRanges:[],sliderValues:[],$rangeStart:$(".range-slider__start"),$rangeEnd:$(".range-slider__end"),$sliderAction:$(".range-slider__action"),$sliderRange:$(".range-slider__range"),startDateErrorElm:$(".range-slider__error-message .start-date-error"),endDateErrorElm:$(".range-slider__error-message .end-date-error"),startDateValid:!0,endDateValid:!0,url:location.href,init:function init(){C.sliderRanges=[],C.sliderValues=[],C.$rangeStart=$(".range-slider__start"),C.$rangeEnd=$(".range-slider__end"),C.initRange(),C.control()},control:function control(){_.on("click",".custom-date",(function(m){m.preventDefault(),C.on.toggle($(this))})),$(document).on("UX-attach",(function(){C.init()})),$(document).on("UX-detach",(function(){window.jcf.destroy($(".range-slider__range"))})),$(".range-slider__range").change((function(){C.on.setRange($(this))})),C.$rangeStart.on("change",(function(){C.on.setStart($(this))})),C.$rangeEnd.on("change",(function(){C.on.setEnd($(this))})),C.$sliderAction.on("click",(function(){C.startDateValid?C.toggleErrorMsg(C.startDateErrorElm,!1):C.toggleErrorMsg(C.startDateErrorElm,!0),C.endDateValid?C.toggleErrorMsg(C.endDateErrorElm,!1):C.toggleErrorMsg(C.endDateErrorElm,!0),C.startDateValid&&C.endDateValid&&C.updateUrl()}))},on:{toggle:function toggle(m){m.closest(".facet").find(".custom-date-form").slideToggle(),m.toggleClass("js--open")}},getSelectedRange:function(m){var y=-1!==C.url.indexOf("?")?C.url.split("?")[1]:"",b={};return y&&(y.split("&").map((function(m){var y=m.split("=");b[y[0]]=y[1]})),b.AfterYear&&b.BeforeYear)?[b.AfterYear,b.BeforeYear]:[parseInt(m.attr("data-min"),10),parseInt(m.attr("data-max"),10)]},getSelectedRangePosition:function(m,y){var b,_;return C.sliderValues.indexOf(m)<0&&(b=C.sliderValues.reduce((function(y,b){return Math.abs(b-m)<Math.abs(y-m)?b:y}))),C.sliderValues.indexOf(y)<0&&(_=C.sliderValues.reduce((function(m,b){return Math.abs(b-y)<Math.abs(m-y)?b:m}))),[C.sliderValues.indexOf(b||m),C.sliderValues.indexOf(_||y)]},initRange:function(){$(".range-slider").each((function(){var m=$(this).find(".range-slider__range");if(!m.hasClass("jcf-hidden")){var y=m.data("frequencies"),b=[1,2,5,10],_=2*b.reduce((function(m,y){return m+y})),R=parseInt(m.attr("data-min")||m.attr("min"),10),I=parseInt(m.attr("data-max")||m.attr("max"),10),P=I-R,F="linear"===m.attr("data-slider-type");if(P>_&&!F){var q=b.slice().reverse(),D=P,M=R,V=0;q.forEach((function(m,_,$){var R=Math.floor(D/3),P=Math.floor(2*R),F=P%m;F>0&&(P-=F),D-=P,_===q.length-1?C.sliderRanges.push({start:M,stop:I,displayStep:b[_],slideStep:m,freq:y.slice(V,y.length)}):C.sliderRanges.push({start:M,stop:M+P,displayStep:b[_],slideStep:m,freq:y.slice(V,V+P)}),V+=P,M+=P})),C.sliderRanges.forEach((function(m){for(var y=m.start;y<=m.stop;)C.sliderValues.indexOf(y)<0&&C.sliderValues.push(y),y+=m.slideStep}))}else if(!C.sliderValues.length>0)for(var B=R;B<=I;B++)C.sliderValues.push(B);m.attr("min",0),m.attr("max",C.sliderValues.length-1);var H=C.getSelectedRange(m);C.$rangeStart.val(H[0]),C.$rangeEnd.val(H[1]);var U=C.getSelectedRangePosition(H[0],H[1]);if(m.attr("value",U.join(",")),window.jcf.replace(m),y){var N=$(this).find(".jcf-range-wrapper"),W=$('<span class="jcf-range-frequencies"></span>');if(P>_&&!F)C.sliderRanges.forEach((function(m){for(var y=0;y<m.freq.length;y++){var b=$('<span class="jcf-range-frequencies__slice" style="width: '+100/m.freq.length/C.sliderRanges.length+"%; opacity: "+m.freq[y]+'"></span>');W.append(b)}})),N.prepend(W);else{for(var z=100/y.length,Y=0;Y<y.length;Y++){var X=$('<span class="jcf-range-frequencies__slice" style="width: '+z+"%; opacity: "+y[Y]+'"></span>');W.append(X)}N.prepend(W)}}}}))}}).on.setRange=function(m){var y=m.closest(".range-slider").find(".jcf-active-handle").attr("class").match(/jcf-index[\w-]*\b/).toString().split("-")[2];$("input.index-"+y).val(C.getValue(m))},C.on.setStart=function(m){var y=m.closest(".range-slider").find(".range-slider__range"),b=parseInt(y.attr("min"),10),_=C.getValueFromInput(m),$=window.jcf.getInstance(y);_>=b&&_<=$.values[1]?($.values[0]=_.toString(),$.refresh(),C.startDateValid=!0):C.startDateValid=!1,y.trigger("change:startend")},C.on.setEnd=function(m){var y=m.closest(".range-slider").find(".range-slider__range"),b=parseInt(y.attr("max"),10),_=C.getValueFromInput(m),$=window.jcf.getInstance(y);_<=b&&_>=$.values[0]?($.values[1]=_.toString(),$.refresh(),C.endDateValid=!0):C.endDateValid=!1,y.trigger("change:startend")},C.toggleErrorMsg=function(m,y){y?m.removeClass("hidden"):m.addClass("hidden")},C.on.rangeUpdate=function(m,y){$(m).on("change change:startend",(function(){y(C.$rangeStart.val(),C.$rangeEnd.val())}))},C.updateUrl=function(){var m=new URL(C.url);m.searchParams.set("AfterYear",C.$rangeStart.val()),m.searchParams.set("BeforeYear",C.$rangeEnd.val()),m.searchParams.set("queryID",C.$sliderRange.attr("data-queryID")),C.removeParam("startPage"),window.location=m},C.removeParam=function(m){var y=C.url.split("?")[0],b=-1!==C.url.indexOf("?")?C.url.split("?")[1]:"",_={};b&&(b.split("&").map((function(m){var y=m.split("=");_[y[0]]=y[1]})),_[m]&&delete _[m],b=Object.keys(_).map((function(m){return m+"="+_[m]})).join("&"),C.url=y+(b?"?"+b:""))},C.getValue=function(m){var y=parseInt(m.val(),10);return C.sliderValues[y]},C.getValueFromInput=function(m){var y,b=m.closest(".range-slider").find(".range-slider__range"),_=parseInt(m.val(),10),$=parseInt(b.attr("data-min"),10),R=parseInt(b.attr("data-max"),10);if(_<=R&&_>=$)if(C.sliderValues.indexOf(_)>=0)y=C.sliderValues.indexOf(_);else{var I=C.sliderValues.reduce((function(m,y){return Math.abs(y-_)<Math.abs(m-_)?y:m}));y=C.sliderValues.indexOf(I)}return y},UX.facetDate=C},1053:function(m,y){var b;$.widget("ui.slider",$.ui.slider,{options:{chart:!1},_refreshValue:function _refreshValue(){var m,y,b,_,C,R=this.options.range,I=this.options.chart,P=this.options,F=this,q=!this._animateOff&&P.animate,D={};this._hasMultipleValues()?this.handles.each((function(b){I?(0===b&&(y=(F.values(b)-F._valueMin())/(F._valueMax()-F._valueMin()+1)*100),1===b&&(y=(F.values(b)-F._valueMin()+1)/(F._valueMax()-F._valueMin()+1)*100)):y=(F.values(b)-F._valueMin())/(F._valueMax()-F._valueMin())*100,D["horizontal"===F.orientation?"left":"bottom"]=y+"%",$(this).stop(1,1)[q?"animate":"css"](D,P.animate),!0===F.options.range&&("horizontal"===F.orientation?(0===b&&F.range.stop(1,1)[q?"animate":"css"]({left:y+"%"},P.animate),1===b&&F.range[q?"animate":"css"]({width:y-m+"%"},{queue:!1,duration:P.animate})):(0===b&&F.range.stop(1,1)[q?"animate":"css"]({bottom:y+"%"},P.animate),1===b&&F.range[q?"animate":"css"]({height:y-m+"%"},{queue:!1,duration:P.animate}))),m=y})):(b=this.value(),_=this._valueMin(),C=this._valueMax(),y=C!==_?(b-_)/(C-_)*100:0,D["horizontal"===this.orientation?"left":"bottom"]=y+"%",this.handle.stop(1,1)[q?"animate":"css"](D,P.animate),"min"===R&&"horizontal"===this.orientation&&this.range.stop(1,1)[q?"animate":"css"]({width:y+"%"},P.animate),"max"===R&&"horizontal"===this.orientation&&this.range.stop(1,1)[q?"animate":"css"]({width:100-y+"%"},P.animate),"min"===R&&"vertical"===this.orientation&&this.range.stop(1,1)[q?"animate":"css"]({height:y+"%"},P.animate),"max"===R&&"vertical"===this.orientation&&this.range.stop(1,1)[q?"animate":"css"]({height:100-y+"%"},P.animate))}}),b={$element:$(".facetDateChart"),rangeStartVal:null,rangeEndVal:null,yearWeights:null,queryID:null,height:200,amplifierRatio:null,url:location.href,init:function init(){b.rangeStartVal=parseInt(b.$element.data("min")),b.rangeEndVal=parseInt(b.$element.data("max")),b.yearWeights=b.$element.data("yearweights"),b.queryID=b.$element.data("queryid"),b.amplifierRatio=parseInt(b.$element.data("amplifierratio")),b.chart.init(),b.control()},control:function control(){$(document).on("slide:opened",(function(m){$(".ui-slider-handle__indicator, .ui-slider-handle__label").remove(),b.init(),$(this).off(m)}))},getSelectedRange:function getSelectedRange(m){var y=-1!==b.url.indexOf("?")?b.url.split("?")[1]:"",_={};return y&&(y.split("&").map((function(m){var y=m.split("=");_[y[0]]=y[1]})),_.AfterYear&&_.BeforeYear)?[_.AfterYear,_.BeforeYear]:[parseInt(b.rangeStartVal),parseInt(b.rangeEndVal)]},updateUrl:function updateUrl(m,y){b.removeParam("AfterYear"),b.removeParam("BeforeYear"),b.removeParam("queryID"),b.url+=(b.url.indexOf("?")>-1?"&":"?")+"AfterYear="+m+"&BeforeYear="+y+"&queryID="+b.queryID,window.location=b.url},removeParam:function removeParam(m){var y=b.url.split("?")[0],_=-1!==b.url.indexOf("?")?b.url.split("?")[1]:"",C={};_&&(_.split("&").map((function(m){var y=m.split("=");C[y[0]]=y[1]})),C[m]&&delete C[m],_=Object.keys(C).map((function(m){return m+"="+C[m]})).join("&"),b.url=y+(_?"?"+_:""))},chart:{init:function init(){b.chart.setOptions();for(var m=b.$element,y=m.options.data.items,_=new Array(m.options.numberOfBins).fill(0),C=m.options.numberOfBins/m.options.numberOfBins,R=0;R<y.length;R++){var I=parseInt(y[R].value/C),P=1;y[R].count&&(P=parseInt(y[R].count)),_[I]+=P}var F=m.attr("name")+"__chart",q=m.attr("name")+"__slider",D="<div class='"+F+"' style='height:"+m.options.height+"px; overflow: hidden;'></div><div class='"+q+"'></div>";m.html(D);for(var M=b.chart.calculateHeightRatio(_,m.options.height),V=100/m.options.numberOfBins,B=0;B<_.length;B++){var H=b.chart.getBinRange(C,B,b.$element.options.sliderRange[0]),U="bin-color-selected",N="bin-color";m.options.optimalRange[0]<=H[0]&&H[0]<=m.options.optimalRange[1]&&(U="bin-color-optimal-selected",N="bin-color-optimal");var W=m.options.showTooltips?"<span class='tooltiptext'>"+H[0]+"/"+_[B]+"</span>":"",z=parseInt(_[B]*M),Y=b.chart.convertToHeight(z),X="<div class='tooltip' style='float:left!important;width:"+V+"%;'>"+W+"<div class='bin in-range "+U+"' style='height:"+Y+"px;bottom:-"+parseInt(m.options.height-Y)+"px;position: relative;'></div><div class='bin out-of-range "+N+"' style='height:"+Y+"px;bottom:"+-parseInt(m.options.height-2*Y)+"px;position: relative;'></div></div>";$("."+F).append(X)}$("."+q).slider({range:!0,min:m.options.sliderRange[0],max:m.options.sliderRange[1],values:m.options.selectedRange,chart:!0,slide:function slide(y,_){b.chart.update(_.values,m.options.sliderRange[0],C,F,q)},create:function create(m,y){$(m.target).find(".ui-slider-handle").append('<span class="ui-slider-handle__indicator"></span>').first().addClass("first"),$(m.target).find(".ui-slider-handle").append('<span class="ui-slider-handle__label"></span>'),$(m.target).find(".ui-slider-handle__indicator").height(b.height+10)},stop:function stop(m,y){b.updateUrl(y.values[0],y.values[1])}}),b.chart.update(m.options.selectedRange,m.options.sliderRange[0],C,F,q)},setOptions:function setOptions(){var m={items:[]};$.each(b.yearWeights,(function(y,_){m.items.push({value:y,count:_*b.amplifierRatio})})),b.chart.setHeight(m);var y={data:m,sliderRange:[b.rangeStartVal,b.rangeEndVal],optimalRange:[b.rangeStartVal,b.rangeEndVal],selectedRange:b.getSelectedRange(),numberOfBins:m.items.length,height:b.height,showTooltips:!1};b.$element.options=y},setHeight:function setHeight(m){b.height=5*Math.max.apply(Math,m.items.map((function(m){return m.count})))+20,b.height<150&&(b.height=150)},update:function update(m,y,_,C,R){var I=m[0],P=m[1],F=$("."+R).find(".ui-slider-handle.first .ui-slider-handle__label").html(I),q=$("."+R).find(".ui-slider-handle:not(.first) .ui-slider-handle__label").html(P);$("."+C+" .in-range").each((function(m,C){var $=b.chart.getBinRange(_,m,y);$[1]<P?I>$[1]?b.chart.setOpacity(C,0):I<$[0]?b.chart.setOpacity(C,1):b.chart.setOpacity(C,1-(I-$[0])/_):$[0]>I&&(P>$[1]?b.chart.setOpacity(C,1):P<$[0]?b.chart.setOpacity(C,0):b.chart.setOpacity(C,1-(P-$[0])/_))})),b.chart.setLabelHandlersPosition(F,q),setTimeout((function(){b.chart.setLabelHandlersPosition(F,q)}),500)},setLabelHandlersPosition:function setLabelHandlersPosition(m,y){var b=m.offset().left+m.outerWidth(),_=y.offset().left-b-2,C=(2-_)/2;m.css("left","-="+C),y.css("left","+="+C),Math.floor(_)>2&&(m.css("left","0"),y.css("left","0"))},getBinRange:function getBinRange(m,y,b){var _=m*y+b,C=m*(y+1)-1;return 1===m&&(C=_),[_,C]},setOpacity:function setOpacity(m,y){$(m).css("opacity",y)},convertToHeight:function convertToHeight(m){return parseInt(5*m+1)},calculateHeightRatio:function calculateHeightRatio(m,y){var _=Math.max.apply(null,m),C=b.chart.convertToHeight(_);return C>y?y/C:1}}},UX.facetDateChart=b},1054:function(m,y){var b,_;b=$("body"),_={$target:null,$targets:$(".refineSearch"),$showController:$(".quick-search__ctrl__refine"),$hideController:$(".quick-search__ctrl__refine--hide"),$elements:$(".refineSearch__row"),ctrls:document.querySelectorAll(".search__result .advanced-search__ctrl"),$wrapper:null,isMobile:!1,vPort:"screen-sm",escape:27,init:function init(){_.control(),$(".quick-search").length&&_.on.hide()},control:function control(){_.on.viewPortListener(),_.click.toggleSearchBlock(),b.on("click",".refineSearch__ctrl__remove",(function(m){m.preventDefault();var y=$(this);_.$target=y.closest(".refineSearch"),_.$wrapper=_.$target.find(".refineSearch__texts"),_.on.remove(y)})),b.on("click",".refineSearch__ctrl__add",(function(m){m.preventDefault();var y=$(this);_.$target=y.closest(".refineSearch"),_.$wrapper=_.$target.find(".refineSearch__texts"),_.on.clone(y)})),b.on("click",".quick-search__ctrl__refine",(function(m){m.preventDefault(),_.$targets.length&&_.on.show()})),b.on("click",".quick-search__ctrl__refine--hide",(function(m){m.preventDefault(),_.on.hide()})),b.on("click",(function(m){_.$targets.is(m.target)||0!==_.$targets.has(m.target).length||_.$showController.is(m.target)||0!==_.$showController.has(m.target).length||$(m.target).closest(".jcf-select-drop").length||_.$targets.closest(".search-result__refine-search").length||$(m.target).closest(".refineSearch__ctrl__remove").length||_.on.hide()})),$(document).on("keydown",(function(m){(m.keyCode||m.which)===_.escape&&_.on.hide()}))},click:{toggleSearchBlock:function toggleSearchBlock(){document.body.addEventListener("click",(function(m){var y=m.target.closest(".advanced-search__ctrl");null!==y&&(m.preventDefault(),_.isMobile||(_.searchBlock.toggleCtrlState(y),_.searchBlock.toggleTabs(),_.searchBlock.clickDefaultTab()))}))}},on:{clone:function clone(m){window.jcf.destroyAll(),m.closest(".refineSearch__row").clone(!0,!0).find("input").attr("name","text"+($(".refineSearch__row").length+1).toString()).val("").end().appendTo(_.$wrapper),m.addClass("hidden"),m.siblings(".refineSearch__ctrl__remove").removeClass("hidden"),$(".jcf").each((function(){jcf.replace($(this))}))},remove:function remove(m){m.closest(".refineSearch__row").remove()},show:function show(){_.$showController.addClass("hidden"),_.$hideController.removeClass("hidden"),_.$targets.addClass("js--open"),_.$targets.show()},hide:function hide(){_.$targets.each((function(){"refine"===b.attr("data-active")&&b.removeAttr("data-active"),_.$hideController.addClass("hidden"),_.$showController.removeClass("hidden"),_.$targets.removeClass("js--open"),_.$targets.hide()}))},viewPortListener:function viewPortListener(){$(document).on(_.vPort+"-on",(function(){_.isMobile=!0,_.on.setPopupAttr(!0)})),$(document).on(_.vPort+"-off",(function(){_.isMobile=!1,_.on.setPopupAttr(!1)}))},setPopupAttr:function setPopupAttr(){var m=arguments.length>0&&void 0!==arguments[0]&&arguments[0];_.ctrls.forEach((function(y){y.setAttribute("aria-haspopup",m?"menu":"false")}))}},searchBlock:{toggleCtrlState:function toggleCtrlState(m){m.classList.toggle("js--open"),m.setAttribute("aria-expanded","true"===m.getAttribute("aria-expanded")?"false":"true")},toggleTabs:function toggleTabs(){document.querySelectorAll(".search-result__meta .advancedSearch__tabs").forEach((function(m){return m.classList.toggle("advancedSearch__tabs--hidden")}))},clickDefaultTab:function clickDefaultTab(){var m=document.querySelector(".advanced-tab");null==m||m.click()}}},UX.refine=_},1055:function(m,y,b){"use strict";b.d(y,"b",(function(){return M})),b.d(y,"c",(function(){return D})),b.d(y,"a",(function(){return q})),b.d(y,"d",(function(){return F}));var _,C=b(618),$=b(619),R=b(621),I=b(3),P=(_=function(m,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(m,y)},function(m,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function __(){this.constructor=m}_(m,y),m.prototype=null===y?Object.create(y):(__.prototype=y.prototype,new __)}),__decorate=function(m,y,b,_){var C,$=arguments.length,R=$<3?y:null===_?_=Object.getOwnPropertyDescriptor(y,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(m,y,b,_);else for(var I=m.length-1;I>=0;I--)(C=m[I])&&(R=($<3?C(R):$>3?C(y,b,R):C(y,b))||R);return $>3&&R&&Object.defineProperty(y,b,R),R},__metadata=function(m,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,y)},F=function(m){function Texts(){return null!==m&&m.apply(this,arguments)||this}return P(Texts,m),Texts}(I.d),q=function(m){function ClassList(){return null!==m&&m.apply(this,arguments)||this}return P(ClassList,m),ClassList}(I.d),D=function(m){function Selectors(){var y=null!==m&&m.apply(this,arguments)||this;return y.searchInFields=new I.e(".advanced-search__search-in"),y.searchInInputs=".advanced-search__input",y.rangeField=new I.e(".advanced-search__timeframe"),y.submitButton=new I.e("#advanced-search-btn","document"),y.autoCompleteFields=new I.e(".advanced-search__autocomplete"),y.advancedFiltersRadioInputs='.advanced-search__advanced-filters .radio--primary input[type="radio"]',y}return P(Selectors,m),Selectors}(I.f),M=function(m){function Elements(){var y=null!==m&&m.apply(this,arguments)||this;return y.autoCompleteFields=[],y}return P(Elements,m),Elements}(I.b),V=function(){function AdvancedSearch(m){this.wrapper=m}return AdvancedSearch.prototype.initialize=function(){this.elements.initialize(this.wrapper),this.addEventListeners()},AdvancedSearch.prototype.addEventListeners=function(){this.initTabular(),this.initRange(),this.initAutoComplete(),this.setSubmitButtonState(),this.setResetButtonListener(),this.selectAdvancedFiltersRadioInput()},AdvancedSearch.prototype.initTabular=function(){this.tabularListener=new C.e(this.elements.searchInFields,this.setSubmitButtonState.bind(this)),this.tabularListener.initialize()},AdvancedSearch.prototype.initRange=function(){this.rangeFieldListener=new $.e(this.elements.rangeField,this.setSubmitButtonState.bind(this)),this.rangeFieldListener.initialize()},AdvancedSearch.prototype.initAutoComplete=function(){this.browserUtils.isIE||(this.autoCompleteListener=new R.e(this.elements.autoCompleteFields,this.setSubmitButtonState.bind(this)),this.autoCompleteListener.initialize())},AdvancedSearch.prototype.setSubmitButtonState=function(m){var y=this.hasEmptyFields()&&this.hasEmptySuggestions()||this.rangeFieldListener.shouldDisable();y?this.elements.submitButton.setAttribute("disabled",""+y):this.elements.submitButton.removeAttribute("disabled")},AdvancedSearch.prototype.selectAdvancedFiltersRadioInput=function(m){var y=this.domUtils.getElements(this.selectors.advancedFiltersRadioInputs);y.forEach((function(m){m.addEventListener("change",(function(m){y.forEach((function(m){m.checked=!1})),m.target.checked=!0}))}))},AdvancedSearch.prototype.hasEmptyFields=function(){var m=this.domUtils.getElements(this.selectors.searchInInputs,this.elements.searchInFields);return m.filter((function(m){return!m.value})).length===m.length},AdvancedSearch.prototype.hasEmptySuggestions=function(){if(!this.autoCompleteListener)return!0;var m=this.autoCompleteListener.autoCompletes;return!m.length||0===m.filter((function(m){return m.getValues().length>0})).length},AdvancedSearch.prototype.setResetButtonListener=function(){var m=this;this.wrapper.addEventListener("reset",(function(y){var b;y.preventDefault(),m.tabularListener.elements.searchInFields.forEach((function(y,b){0===b?(m.domUtils.getElement("input",y).value="",m.domUtils.getElement("select",y).selectedIndex=0):y.remove()})),m.tabularListener.toggleButtons(),null===(b=m.rangeFieldListener.elements.radios[0])||void 0===b||b.click(),m.autoCompleteListener.autoCompletes.forEach((function(m){m.removeAllTags()}))}))},__decorate([Object(I.i)(),__metadata("design:type",I.a)],AdvancedSearch.prototype,"browserUtils",void 0),AdvancedSearch=__decorate([Object(I.c)(D,M,q,F),__metadata("design:paramtypes",[HTMLElement])],AdvancedSearch)}();y.e=V},1057:function(m,y){var b,_,C;_=$("body"),C={url:location.href,rememberUserLayout:!0,$savedSearchPanel:null,frequencyLabels:{},maxSearchQueries:null,goLink:"/action/doSearch?target=saved&runSaved=",removeLink:"/action/doDeleteSearch?searchType=saved&queryId=",filtersTopicsCounter:0,elements:{doSearchTopicsInput:document.querySelector("#do-search__filters #search-topic")},initialValues:{doSearchTopicsInput:null===(b=document.querySelector("#do-search__filters #search-topic"))||void 0===b?void 0:b.value},init:function init(){this.$savedSearchPanel=$(".advancedSearch__tabs .saved-searches"),this.maxSearchQueries=this.$savedSearchPanel.data("queries"),this.frequencyLabels=this.$savedSearchPanel.data("frequency-labels"),C.control(),C.additionalInit(),C.additionalControl(),C.set.userPublicationLayout()},control:function control(){_.on("click","#saveSearchTriggerButton",(function(){C.openSaveSearchDialog()})),_.on("submit","#saveSearchDialog form",(function(m){return C.onSaveSearchSubmitHandler(m)})),_.on("click",".search__layout>span",(function(){$(".search__layout>span").removeClass("active"),$(this).addClass("active"),$(this).hasClass("search__layout-tile")?($(".search-result__body").addClass("search-result--tile"),localStorage.setItem("userPublicationLayout","tile")):($(".search-result__body").removeClass("search-result--tile"),localStorage.setItem("userPublicationLayout","list"))})),_.on("focus",'[name="AllField"]',(function(m){var y=$(m.currentTarget);y.length&&y[0].setSelectionRange(-1,-1)})),_.on("change","#multi__select__options",(function(m){var y=Array.from(document.querySelectorAll('#multi__select__options input[type="checkbox"]')),b=C.elements.doSearchTopicsInput,_=C.filtersTopicsCounter;"checkbox"==m.target.type&&(_=y.filter((function(m){return m.checked})).length,b.value=_?1==_?"1 Topic Selected":"".concat(_," Topics Selected"):C.initialValues.doSearchTopicsInput)}))},additionalControl:function additionalControl(){},additionalInit:function additionalInit(){},set:{userPublicationLayout:function userPublicationLayout(){C.rememberUserLayout&&("tile"===localStorage.userPublicationLayout?$(".search__layout-tile").click():"list"===localStorage.userPublicationLayout&&$(".search__layout-list").click())}},get:{url:function url(){},text:function text(m){m=m.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var y=new RegExp("[\\?&]"+m+"=([^&#]*)").exec(C.url);return null==y?null:y[1]},value:function value(){}},render:{row:function row(m,y){var b=C.$savedSearchPanel.find("tbody tr").eq(y);this.columns(b,m),this.actions(b,m),b.hasClass("hidden")&&(b.removeClass("hidden"),C.$savedSearchPanel.find(".table-responsive").parent().removeClass("hidden"),C.$savedSearchPanel.find(".emptySavedSearches").remove())},columns:function columns(m,y){var b=y.qName,_=y.qSavedOn,C=y.qLastRun;m.find(".name-td").html(b),m.find(".saved-on-td").html(_),m.find(".last-run-td").html(C),this.additionalColumns(m,y),this.frequencyColumn(m,y)},additionalColumns:function additionalColumns(m,y){},frequencyColumn:function frequencyColumn(m,y){var b=y.qAlertStatus;C.frequencyLabels&&C.frequencyLabels[b]&&(b=C.frequencyLabels[b]),m.find(".frequency-td").html(b)},actions:function actions(m,y){var b=y.qId;m.find('[data-action-type="saved-search--remove"]').attr("href",C.removeLink+b),m.find('[data-action-type="saved-search--run"]').attr("href",C.goLink+b)}},openSaveSearchDialog:function openSaveSearchDialog(){var m=C.getCookie("openDialog");if(null!=m&&""!==m){var y=$("#saveSearchTriggerButton");y.length>0&&(document.cookie="openDialog=;expires=Wed; 01 Jan 1970",y.click())}},getCookie:function getCookie(m){for(var y=m+"=",b=document.cookie.split(";"),_=0;_<b.length;_++){for(var C=b[_];" "===C.charAt(0);)C=C.substring(1);if(-1!==C.indexOf(y))return C.substring(y.length,C.length)}return null},onSaveSearchSubmitHandler:function onSaveSearchSubmitHandler(m){return $("#newSearchSaveButton").hide(),$(".saveSearchProgress").show(),$.ajax({type:"POST",url:"/action/doSaveSearch",data:$(m.target).serialize(),success:C.saveSearchSuccessHandler,error:function error(m){$(".error.saveSearchMsg").show("fade").removeClass("hidden"),$("#newSearchSaveButton").show(),$(".success.saveSearchMsg, .saveSearchProgress").hide(),$("#saveSearchDialog").modal("toggle"),$("#saveSearchDialog").click()}}),!1},saveSearchSuccessHandler:function saveSearchSuccessHandler(m){$(".success.saveSearchMsg").show("fade").removeClass("hidden"),$("#newSearchSaveButton").show(),$(".error.saveSearchMsg, .saveSearchProgress").hide(),$("#saveSearchDialog").modal("toggle"),$("#saveSearchDialog").click(),UX.modal.on.hide(),C.redrawSavedSearchesPanel(JSON.parse(m).favQueries)},redrawSavedSearchesPanel:function redrawSavedSearchesPanel(m){var y=this;m.forEach((function(m,b){b>=C.maxSearchQueries||y.render.row(m,b)}))}},UX.searchResult=C},449:function(m,y,b){var _,C,$,R=b(1);$=function t(){"use strict";function e(m,y){var b=Object.keys(m);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(m);y&&(_=_.filter((function(y){return Object.getOwnPropertyDescriptor(m,y).enumerable}))),b.push.apply(b,_)}return b}function t(m){for(var y=1;y<arguments.length;y++){var b=null!=arguments[y]?arguments[y]:{};y%2?e(Object(b),!0).forEach((function(y){r(m,y,b[y])})):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(b)):e(Object(b)).forEach((function(y){Object.defineProperty(m,y,Object.getOwnPropertyDescriptor(b,y))}))}return m}function n(m){return(n="function"==typeof Symbol&&"symbol"==R(Symbol.iterator)?function(m){return R(m)}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":R(m)})(m)}function r(m,y,b){return y in m?Object.defineProperty(m,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[y]=b,m}function i(m){return function(m){if(Array.isArray(m))return s(m)}(m)||function(m){if("undefined"!=typeof Symbol&&null!=m[Symbol.iterator]||null!=m["@@iterator"])return Array.from(m)}(m)||o(m)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(m,y){if(m){if("string"==typeof m)return s(m,y);var b=Object.prototype.toString.call(m).slice(8,-1);return"Object"===b&&m.constructor&&(b=m.constructor.name),"Map"===b||"Set"===b?Array.from(m):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?s(m,y):void 0}}function s(m,y){(null==y||y>m.length)&&(y=m.length);for(var b=0,_=new Array(y);b<y;b++)_[b]=m[b];return _}var m=function u(m){return"string"==typeof m?document.querySelector(m):m()},y=function a(y,b){var _="string"==typeof y?document.createElement(y):y;for(var C in b){var $=b[C];if("inside"===C)$.append(_);else if("dest"===C)m($[0]).insertAdjacentElement($[1],_);else if("around"===C){var R=$;R.parentNode.insertBefore(_,R),_.append(R),null!=R.getAttribute("autofocus")&&R.focus()}else C in _?_[C]=$:_.setAttribute(C,$)}return _},b=function c(m,y){return m=String(m).toLowerCase(),y?m.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):m},_=function l(m,b){return y("mark",t({innerHTML:m},"string"==typeof b&&{class:b})).outerHTML},C=function f(m,y){y.input.dispatchEvent(new CustomEvent(m,{bubbles:!0,detail:y.feedback,cancelable:!0}))},$=function p(m,y,C){var $=C||{},R=$.mode,I=$.diacritics,P=$.highlight,F=b(y,I);if(y=String(y),m=b(m,I),"loose"===R){var q=(m=m.replace(/ /g,"")).length,D=0,p=Array.from(y).map((function(y,b){return D<q&&F[b]===m[D]&&(y=P?_(y,P):y,D++),y})).join("");if(D===q)return p}else{var M=F.indexOf(m);if(~M)return m=y.substring(M,M+m.length),P?y.replace(m,_(m,P)):y}},I=function d(m,y){return new Promise((function(b,_){var $;return($=m.data).cache&&$.store?b():new Promise((function(m,b){return"function"==typeof $.src?$.src(y).then(m,b):m($.src)})).then((function(y){try{return m.feedback=$.store=y,C("response",m),b()}catch(m){return _(m)}}),_)}))},P=function h(m,y){var b=y.data,_=y.searchEngine,R=[];b.store.forEach((function(C,I){var P=function a(b){var I=b?C[b]:C,P="function"==typeof _?_(m,I):$(m,I,{mode:_,diacritics:y.diacritics,highlight:y.resultItem.highlight});if(P){var a={match:P,value:C};b&&(a.key=b),R.push(a)}};if(b.keys){var F,q=function(m,y){var b="undefined"!=typeof Symbol&&m[Symbol.iterator]||m["@@iterator"];if(!b){if(Array.isArray(m)||(b=o(m))){b&&(m=b);var _=0,C=function i(){};return{s:C,n:function n(){return _>=m.length?{done:!0}:{done:!1,value:m[_++]}},e:function e(m){throw m},f:C}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var $,R=!0,I=!1;return{s:function s(){b=b.call(m)},n:function n(){var m=b.next();return R=m.done,m},e:function e(m){I=!0,$=m},f:function f(){try{R||null==b.return||b.return()}finally{if(I)throw $}}}}(b.keys);try{for(q.s();!(F=q.n()).done;)P(F.value)}catch(m){q.e(m)}finally{q.f()}}else P()})),b.filter&&(R=b.filter(R));var I=R.slice(0,y.resultsList.maxResults);y.feedback={query:m,matches:R,results:I},C("results",y)},F="aria-expanded",q="aria-activedescendant",D="aria-selected",M=function v(m,y){m.feedback.selection=t({index:y},m.feedback.results[y])},V=function g(m){m.isOpen||((m.wrapper||m.input).setAttribute(F,!0),m.list.removeAttribute("hidden"),m.isOpen=!0,C("open",m))},B=function w(m){m.isOpen&&((m.wrapper||m.input).setAttribute(F,!1),m.input.setAttribute(q,""),m.list.setAttribute("hidden",""),m.isOpen=!1,C("close",m))},H=function O(m,y){var b=y.resultItem,_=y.list.getElementsByTagName(b.tag),$=!!b.selected&&b.selected.split(" ");if(y.isOpen&&_.length){var R,I,P=y.cursor;m>=_.length&&(m=0),m<0&&(m=_.length-1),y.cursor=m,P>-1&&(_[P].removeAttribute(D),$&&(I=_[P].classList).remove.apply(I,i($))),_[m].setAttribute(D,!0),$&&(R=_[m].classList).add.apply(R,i($)),y.input.setAttribute(q,_[y.cursor].id),y.list.scrollTop=_[m].offsetTop-y.list.clientHeight+_[m].clientHeight+5,y.feedback.cursor=y.cursor,M(y,m),C("navigate",y)}},U=function A(m){H(m.cursor+1,m)},N=function k(m){H(m.cursor-1,m)},W=function L(m,y,b){(b=b>=0?b:m.cursor)<0||(m.feedback.event=y,M(m,b),C("selection",m),B(m))};function j(m,b){var _=this;return new Promise((function(C,$){var R,F;return R=b||((F=m.input)instanceof HTMLInputElement||F instanceof HTMLTextAreaElement?F.value:F.innerHTML),function(m,y,b){return y?y(m):m.length>=b}(R=m.query?m.query(R):R,m.trigger,m.threshold)?I(m,R).then((function(b){try{return m.feedback instanceof Error?C():(P(R,m),m.resultsList&&function(m){var b=m.resultsList,_=m.list,C=m.resultItem,$=m.feedback,R=$.matches,I=$.results;if(m.cursor=-1,_.innerHTML="",R.length||b.noResults){var P=new DocumentFragment;I.forEach((function(m,b){var _=y(C.tag,t({id:"".concat(C.id,"_").concat(b),role:"option",innerHTML:m.match,inside:P},C.class&&{class:C.class}));C.element&&C.element(_,m)})),_.append(P),b.element&&b.element(_,$),V(m)}else B(m)}(m),c.call(_))}catch(m){return $(m)}}),$):(B(m),c.call(_));function c(){return C()}}))}var z=function S(m,y){for(var b in m)for(var _ in m[b])y(b,_)};function E(m){var b=this;return new Promise((function(_,$){var R,P,F;if(R=m.placeHolder,F={role:"combobox","aria-owns":(P=m.resultsList).id,"aria-haspopup":!0,"aria-expanded":!1},y(m.input,t(t({"aria-controls":P.id,"aria-autocomplete":"both"},R&&{placeholder:R}),!m.wrapper&&t({},F))),m.wrapper&&(m.wrapper=y("div",t({around:m.input,class:m.name+"_wrapper"},F))),P&&(m.list=y(P.tag,t({dest:[P.destination,P.position],id:P.id,role:"listbox",hidden:"hidden"},P.class&&{class:P.class}))),function T(m){var y,b,_,C=m.events,$=(y=function n(){return j(m)},b=m.debounce,function(){clearTimeout(_),_=setTimeout((function(){return y()}),b)}),R=m.events=t({input:t({},C&&C.input)},m.resultsList&&{list:C?t({},C.list):{}}),I={input:{input:function input(){$()},keydown:function keydown(y){!function(m,y){switch(m.keyCode){case 40:case 38:m.preventDefault(),40===m.keyCode?U(y):N(y);break;case 13:y.submit||m.preventDefault(),y.cursor>=0&&W(y,m);break;case 9:y.resultsList.tabSelect&&y.cursor>=0&&W(y,m);break;case 27:y.input.value="",B(y)}}(y,m)},blur:function blur(){B(m)}},list:{mousedown:function mousedown(m){m.preventDefault()},click:function click(y){!function(m,y){var b=y.resultItem.tag.toUpperCase(),_=Array.from(y.list.querySelectorAll(b)),C=m.target.closest(b);C&&C.nodeName===b&&W(y,m,_.indexOf(C))}(y,m)}}};z(I,(function(y,b){(m.resultsList||"input"===b)&&(R[y][b]||(R[y][b]=I[y][b]))})),z(R,(function(y,b){m[y].addEventListener(b,R[y][b])}))}(m),m.data.cache)return I(m).then((function(m){try{return c.call(b)}catch(m){return $(m)}}),$);function c(){return C("init",m),_()}return c.call(b)}))}function x(m){var y=m.prototype;y.init=function(){E(this)},y.start=function(m){j(this,m)},y.unInit=function(){if(this.wrapper){var m=this.wrapper.parentNode;m.insertBefore(this.input,this.wrapper),m.removeChild(this.wrapper)}var y;z((y=this).events,(function(m,b){y[m].removeEventListener(b,y.events[m][b])}))},y.open=function(){V(this)},y.close=function(){B(this)},y.goTo=function(m){H(m,this)},y.next=function(){U(this)},y.previous=function(){N(this)},y.select=function(m){W(this,null,m)},y.search=function(m,y,b){return $(m,y,b)}}return function e(y){this.options=y,this.id=e.instances=(e.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},function(y){var b=y.name,_=y.options,C=y.resultsList,$=y.resultItem;for(var R in _)if("object"===n(_[R]))for(var I in y[R]||(y[R]={}),_[R])y[R][I]=_[R][I];else y[R]=_[R];y.selector=y.selector||"#"+b,C.destination=C.destination||y.selector,C.id=C.id||b+"_list_"+y.id,$.id=$.id||b+"_result",y.input=m(y.selector)}(this),x.call(this,e),E(this)}},"object"==R(y)&&void 0!==m?m.exports=$():void 0===(C="function"==typeof(_=$)?_.call(y,b,y,m):_)||(m.exports=C)},618:function(m,y,b){"use strict";b.d(y,"b",(function(){return q})),b.d(y,"c",(function(){return F})),b.d(y,"a",(function(){return P})),b.d(y,"d",(function(){return I}));var _,C=b(3),$=b(4),R=(_=function(m,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(m,y)},function(m,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function __(){this.constructor=m}_(m,y),m.prototype=null===y?Object.create(y):(__.prototype=y.prototype,new __)}),__decorate=function(m,y,b,_){var C,$=arguments.length,R=$<3?y:null===_?_=Object.getOwnPropertyDescriptor(y,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(m,y,b,_);else for(var I=m.length-1;I>=0;I--)(C=m[I])&&(R=($<3?C(R):$>3?C(y,b,R):C(y,b))||R);return $>3&&R&&Object.defineProperty(y,b,R),R},__metadata=function(m,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,y)},I=function(m){function Texts(){var y=null!==m&&m.apply(this,arguments)||this;return y.add="Add search field",y.remove="Remove search field",y}return R(Texts,m),Texts}(C.d),P=function(m){function ClassList(){var y=null!==m&&m.apply(this,arguments)||this;return y.keywordField="text",y.typeField="searchArea",y.hide="hidden",y}return R(ClassList,m),ClassList}(C.d),F=function(m){function Selectors(){var y=null!==m&&m.apply(this,arguments)||this;return y.searchInFields=".advanced-search__search-in",y.add=".advanced-search__search-in__add",y.remove=".advanced-search__search-in__remove",y.keywordField="input",y.typeField="select",y.searchInFieldWrapper=new C.e(".advanced-search__search-in__term"),y}return R(Selectors,m),Selectors}(C.f),q=function(m){function Elements(){var y=null!==m&&m.apply(this,arguments)||this;return y.searchInFieldWrapper=[],y}return R(Elements,m),Object.defineProperty(Elements.prototype,"searchInField",{get:function(){return this._searchInField},set:function(m){this._searchInField=m,this.currentAddButton=this.getAddButton(m),this.currentRemoveButton=this.getRemoveButton(m)},enumerable:!1,configurable:!0}),Elements.prototype.getAddButton=function(m){return this.domUtils.getElement(this.selectors.add,m)},Elements.prototype.getRemoveButton=function(m){return this.domUtils.getElement(this.selectors.remove,m)},Object.defineProperty(Elements.prototype,"searchInFields",{get:function(){return this.domUtils.getElements(this.selectors.searchInFieldWrapper.selector,this.wrapper)},enumerable:!1,configurable:!0}),Elements}(C.b),D=function(){function AdvancedSearchTabular(m,y){this.wrapper=m,this.onChanged=y,this.searchTermsAligner=function(m){m.forEach((function(m,y){var b,_,C,$=null===(b=null==m?void 0:m.querySelector(".advanced-search__select"))||void 0===b?void 0:b.previousElementSibling,R=(null==m?void 0:m.querySelector(".advanced-search__search-term"))?null===(_=null==m?void 0:m.querySelector(".advanced-search__search-term"))||void 0===_?void 0:_.previousElementSibling:null===(C=null==m?void 0:m.querySelector(".advanced-search__input"))||void 0===C?void 0:C.previousElementSibling,I=null==m?void 0:m.querySelector(".advanced-search__search-in__remove");$&&($.innerHTML="Context for search term "+(y+1)),R&&(R.innerHTML="Search term "+(y+1)),null==I||I.setAttribute("aria-label","Remove search field "+(y+1))}))}}return Object.defineProperty(AdvancedSearchTabular.prototype,"fieldNames",{get:function(){return{input:"text",dropdown:"field"}},enumerable:!1,configurable:!0}),AdvancedSearchTabular.prototype.initialize=function(){this.elements.initialize(this.wrapper),this.addEventListeners(),this.toggleButtons()},AdvancedSearchTabular.prototype.addEventListeners=function(){var m=this;this.elements.searchInField?this.setSearchInFieldsEvents(this.elements.searchInField):this.elements.searchInFieldWrapper.forEach((function(y){m.elements.currentAddButton=m.elements.getAddButton(y),m.elements.currentRemoveButton=m.elements.getRemoveButton(y),m.setSearchInFieldsEvents(y)}))},AdvancedSearchTabular.prototype.setSearchInFieldsEvents=function(m){this.domUtils.addEventListener(m,"input",this.onChanged.bind(this)),this.domUtils.addEventListener(this.elements.currentAddButton,"click",this.clone.bind(this)),this.domUtils.addEventListener(this.elements.currentRemoveButton,"click",this.remove.bind(this)),this.domUtils.addEventListener(this.elements.currentAddButton,"keydown",this.onKeyDownAdd.bind(this)),this.domUtils.addEventListener(this.elements.currentRemoveButton,"keydown",this.onKeyDownRemove.bind(this))},AdvancedSearchTabular.prototype.onKeyDownAdd=function(m){m.keyCode===$.c.ENTER&&this.clone(m)},AdvancedSearchTabular.prototype.onKeyDownRemove=function(m){m.keyCode===$.c.ENTER&&this.remove(m)},AdvancedSearchTabular.prototype.clone=function(m){var y,b;m.stopPropagation(),m.preventDefault();var _=document.createElement("div");_.innerHTML=null===(y=this.elements.searchInFieldWrapper[0])||void 0===y?void 0:y.outerHTML;var C=this.domUtils.getElement(this.selectors.searchInFieldWrapper.selector,_),$=C.querySelector("input"),R=C.querySelector(".advanced-search__search-in__area");$.removeAttribute("value"),(null===(b=null==R?void 0:R.options)||void 0===b?void 0:b.length)&&(R.options[0].selected=!0),this.wrapper.insertAdjacentElement("beforeend",C),this.elements.searchInField=C,this.addEventListeners(),this.toggleButtons();var I=this.elements.searchInField,P=null==I?void 0:I.querySelector('select[id^="searchArea"]');null==P||P.focus()},AdvancedSearchTabular.prototype.remove=function(m){var y;m.stopPropagation(),m.preventDefault();var b,_,C=m.currentTarget.closest(this.selectors.searchInFieldWrapper.selector),$=this.elements.wrapper.querySelectorAll(this.selectors.searchInFieldWrapper.selector),R=null===(y=Array.from($))||void 0===y?void 0:y.filter((function(m){return m!==C}));null==$||$.forEach((function(m,y){if(m===C){var R=0===y?$[y+1]:$[y-1];null==(_=(null==(b=R)?void 0:b.querySelector(".advanced-search__search-in__remove:not(.hidden)"))?null==b?void 0:b.querySelector(".advanced-search__search-in__remove:not(.hidden)"):null==b?void 0:b.querySelector(".advanced-search__search-in__add:not(.hidden)"))||_.setAttribute("tabindex","0")}else null==m||m.removeAttribute("tabindex")})),null==_||_.focus(),null==C||C.remove(),this.searchTermsAligner(R),this.toggleButtons()},AdvancedSearchTabular.prototype.toggleButtons=function(){var m=this,y=this.elements.searchInFields;y.forEach((function(b,_){var C,$,R;m.changeFieldAttributes(b,_);var I=m.elements.getAddButton(b),P=m.elements.getRemoveButton(b),F=null===(C=null==b?void 0:b.querySelector(".advanced-search__select"))||void 0===C?void 0:C.previousElementSibling,q=(null==b?void 0:b.querySelector(".advanced-search__search-term"))?null===($=null==b?void 0:b.querySelector(".advanced-search__search-term"))||void 0===$?void 0:$.previousElementSibling:null===(R=null==b?void 0:b.querySelector(".advanced-search__input"))||void 0===R?void 0:R.previousElementSibling;_===y.length-1?(null==P||P.classList.add(m.classList.hide),null==I||I.classList.remove(m.classList.hide),F&&(F.innerHTML="Context for search term "+(_+1)),q&&(q.innerHTML="Search term "+(_+1)),null==P||P.setAttribute("aria-label",m.texts.remove+" "+(_+1)),null==P||P.setAttribute("title",m.texts.remove+" "+(_+1)),null==I||I.setAttribute("aria-label",m.texts.add)):(null==I||I.classList.add(m.classList.hide),null==P||P.classList.remove(m.classList.hide))}))},AdvancedSearchTabular.prototype.changeFieldAttributes=function(m,y){var b=this.domUtils.getElement(this.selectors.typeField,m),_=this.domUtils.getElement(this.selectors.keywordField,m),C=this.domUtils.getElements("label",m),$=y+1;_.name=this.fieldNames.input+$,b.name=this.fieldNames.dropdown+$,_.id=this.classList.keywordField+$,b.id=this.classList.typeField+$,C.forEach((function(m){m.getAttribute("for").includes("text")?m.setAttribute("for","text"+$):m.setAttribute("for","searchArea"+$)}))},AdvancedSearchTabular=__decorate([Object(C.c)(F,q,P,I),__metadata("design:paramtypes",[HTMLElement,Function])],AdvancedSearchTabular)}();y.e=D},619:function(m,y,b){"use strict";b.d(y,"b",(function(){return F})),b.d(y,"c",(function(){return P})),b.d(y,"a",(function(){return I})),b.d(y,"d",(function(){return R}));var _,C=b(3),$=(_=function(m,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(m,y)},function(m,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function __(){this.constructor=m}_(m,y),m.prototype=null===y?Object.create(y):(__.prototype=y.prototype,new __)}),__decorate=function(m,y,b,_){var C,$=arguments.length,R=$<3?y:null===_?_=Object.getOwnPropertyDescriptor(y,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(m,y,b,_);else for(var I=m.length-1;I>=0;I--)(C=m[I])&&(R=($<3?C(R):$>3?C(y,b,R):C(y,b))||R);return $>3&&R&&Object.defineProperty(y,b,R),R},__metadata=function(m,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,y)},R=function(m){function Texts(){return null!==m&&m.apply(this,arguments)||this}return $(Texts,m),Texts}(C.d),I=function(m){function ClassList(){return null!==m&&m.apply(this,arguments)||this}return $(ClassList,m),ClassList}(C.d),P=function(m){function Selectors(){var y=null!==m&&m.apply(this,arguments)||this;return y.rangeField=new C.e(".timeframe__static-range"),y.customRange=new C.e(".timeframe__custom-range-filter"),y.customRangeRadio=new C.e("#customRange"),y.radios=new C.e(".radio--primary input"),y.selects=new C.e("select"),y.timeRangeAlert=new C.e("#time_range_interval_alert"),y}return $(Selectors,m),Selectors}(C.f),F=function(m){function Elements(){var y=null!==m&&m.apply(this,arguments)||this;return y.radios=[],y.selects=[],y}return $(Elements,m),Object.defineProperty(Elements.prototype,"oldRadio",{get:function(){return this._oldRadio},set:function(m){this._oldRadio=m,this.disabledAllFields();var y=m.closest(this.selectors.rangeField.selector+", "+this.selectors.customRange.selector);this.enableSiblingFields(y)},enumerable:!1,configurable:!0}),Elements.prototype.disabledAllFields=function(){this.selects.forEach((function(m){m.setAttribute("disabled","true")}))},Elements.prototype.enableSiblingFields=function(m){m&&this.domUtils.getElements(this.selectors.selects.selector,m).forEach((function(m){m.removeAttribute("disabled")}))},Elements}(C.b),q=function(){function AdvancedSearchRangeFields(m,y){this.wrapper=m,this.onChanged=y}return AdvancedSearchRangeFields.prototype.initialize=function(){this.wrapper&&(this.elements.initialize(this.wrapper),this.addEventListeners())},AdvancedSearchRangeFields.prototype.addEventListeners=function(){var m=this;this.elements.radios.forEach((function(y){m.domUtils.addEventListener(y,"click",m.onChange.bind(m,y))})),this.elements.selects.forEach((function(y){m.domUtils.addEventListener(y,"change",m.onChanged)}))},AdvancedSearchRangeFields.prototype.onChange=function(m,y){m!==this.elements.oldRadio&&(this.elements.oldRadio=m,this.onChanged(y))},AdvancedSearchRangeFields.prototype.shouldDisable=function(){var m,y,b,_={fromYear:0,fromMonth:0,toYear:0,toMonth:0};this.elements.selects.forEach((function(m){_.hasOwnProperty(m.id)&&(_[m.id]=parseInt(m.value))}));var C=_.fromYear,$=_.fromMonth,R=_.toYear,I=_.toMonth,P=null!==(y=null===(m=this.elements.customRangeRadio)||void 0===m?void 0:m.checked)&&void 0!==y&&y,F=Object.values(_).some((function(m){return isNaN(m)})),q=R<C||R===C&&I<$,D=P&&(F||q),M=null===(b=this.elements.timeRangeAlert)||void 0===b?void 0:b.getAttribute("data-label"),V=R+C+I+$;return this.elements.timeRangeAlert&&(D&&!isNaN(V)?this.elements.timeRangeAlert.innerHTML=M:this.elements.timeRangeAlert.innerHTML=""),P&&(F||q)},AdvancedSearchRangeFields=__decorate([Object(C.c)(P,F,I,R),__metadata("design:paramtypes",[HTMLElement,Function])],AdvancedSearchRangeFields)}();y.e=q},621:function(m,y,b){"use strict";b.d(y,"b",(function(){return V})),b.d(y,"c",(function(){return M})),b.d(y,"a",(function(){return D})),b.d(y,"d",(function(){return q}));var _,C=b(449),$=b.n(C),R=b(3),I=(_=function(m,y){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(m,y)},function(m,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function __(){this.constructor=m}_(m,y),m.prototype=null===y?Object.create(y):(__.prototype=y.prototype,new __)}),P=function(m){function AutoCompleteTags(y,b){var _=m.call(this,y)||this;_.config=y,_.inputField=b,_.badgeCloseIcon='<i class="autoComplete__tag__icon"></i>';var C=R.g.get(R.h),$="function"==typeof y.selector?y.selector():C.getElement(y.selector);return _.tagsPosition=y.tagsPosition||$,_.preselectedItems=y.preselectedItems||[],_.tagValues=[],"function"==typeof y.onTagRemoved&&(_.onTagRemoved=y.onTagRemoved),_.tagClasses=y.tagClasses||["autoComplete__tag"],_.checkSetPreselected(),_}return I(AutoCompleteTags,m),Object.defineProperty(AutoCompleteTags.prototype,"field",{get:function(){return this.inputField},enumerable:!1,configurable:!0}),Object.defineProperty(AutoCompleteTags.prototype,"values",{get:function(){return this.tagValues.map((function(m){return m[0].value}))},enumerable:!1,configurable:!0}),AutoCompleteTags.prototype.valueExists=function(m){return this.values.findIndex((function(y){return y===m}))>-1},AutoCompleteTags.prototype.checkSetPreselected=function(){var m=this;this.preselectedItems.map((function(y){var b=y.label,_=y.value;m.createTagValue(b,_)}))},AutoCompleteTags.prototype.buildInput=function(m,y){if(m){var b='<input type="hidden" name="'+m.name+'[]" value="'+y+'"/>',_=document.createElement("div");return _.innerHTML=b,_.firstChild}},AutoCompleteTags.prototype.getValues=function(){return this.tagValues},AutoCompleteTags.prototype.removeAllTags=function(){this.tagValues.forEach((function(m){var y=m[0],b=m[1];y.parentNode.removeChild(y),b.parentNode.removeChild(b)})),this.tagValues=[],this.onTagRemoved&&this.onTagRemoved()},AutoCompleteTags.prototype.createTagValue=function(m,y){var b;if(!this.valueExists(y)){var _=this.inputField,C=this.buildInput(_,y),$=this.buildTag(m,C);this.tagValues.push([C,$]),this.config.tagsPosition?this.tagsPosition.appendChild($):this.tagsPosition.parentNode.insertBefore($,this.tagsPosition),null===(b=_.parentElement)||void 0===b||b.insertBefore(C,_)}},AutoCompleteTags.prototype.buildTag=function(m,y){var b,_=this,C=document.createElement("span");C.innerHTML="<span>"+m+"</span>";var $=document.createElement("a");return $.innerHTML=this.badgeCloseIcon,$.href="#",$.addEventListener("click",(function(m){m.preventDefault(),y.parentNode.removeChild(y),C.parentNode.removeChild(C),_.tagValues=_.tagValues.filter((function(m){var b=m[0],_=m[1];return!(y===b&&C===_)})),_.onTagRemoved&&_.onTagRemoved()})),C.appendChild($),(b=C.classList).add.apply(b,this.tagClasses),C},AutoCompleteTags}($.a),F=function(){var extendStatics=function(m,y){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,y){m.__proto__=y}||function(m,y){for(var b in y)Object.prototype.hasOwnProperty.call(y,b)&&(m[b]=y[b])})(m,y)};return function(m,y){if("function"!=typeof y&&null!==y)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");function __(){this.constructor=m}extendStatics(m,y),m.prototype=null===y?Object.create(y):(__.prototype=y.prototype,new __)}}(),__decorate=function(m,y,b,_){var C,$=arguments.length,R=$<3?y:null===_?_=Object.getOwnPropertyDescriptor(y,b):_;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)R=Reflect.decorate(m,y,b,_);else for(var I=m.length-1;I>=0;I--)(C=m[I])&&(R=($<3?C(R):$>3?C(y,b,R):C(y,b))||R);return $>3&&R&&Object.defineProperty(y,b,R),R},__metadata=function(m,y){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(m,y)},__awaiter=function(m,y,b,_){return new(b||(b=Promise))((function(C,$){function fulfilled(m){try{step(_.next(m))}catch(m){$(m)}}function rejected(m){try{step(_.throw(m))}catch(m){$(m)}}function step(m){m.done?C(m.value):function adopt(m){return m instanceof b?m:new b((function(y){y(m)}))}(m.value).then(fulfilled,rejected)}step((_=_.apply(m,y||[])).next())}))},__generator=function(m,y){var b,_,C,$,R={label:0,sent:function(){if(1&C[0])throw C[1];return C[1]},trys:[],ops:[]};return $={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&($[Symbol.iterator]=function(){return this}),$;function verb($){return function(I){return function step($){if(b)throw new TypeError("Generator is already executing.");for(;R;)try{if(b=1,_&&(C=2&$[0]?_.return:$[0]?_.throw||((C=_.return)&&C.call(_),0):_.next)&&!(C=C.call(_,$[1])).done)return C;switch(_=0,C&&($=[2&$[0],C.value]),$[0]){case 0:case 1:C=$;break;case 4:return R.label++,{value:$[1],done:!1};case 5:R.label++,_=$[1],$=[0];continue;case 7:$=R.ops.pop(),R.trys.pop();continue;default:if(!(C=R.trys,(C=C.length>0&&C[C.length-1])||6!==$[0]&&2!==$[0])){R=0;continue}if(3===$[0]&&(!C||$[1]>C[0]&&$[1]<C[3])){R.label=$[1];break}if(6===$[0]&&R.label<C[1]){R.label=C[1],C=$;break}if(C&&R.label<C[2]){R.label=C[2],R.ops.push($);break}C[2]&&R.ops.pop(),R.trys.pop();continue}$=y.call(m,R)}catch(m){$=[6,m],_=0}finally{b=C=0}if(5&$[0])throw $[1];return{value:$[0]?$[1]:void 0,done:!0}}([$,I])}}},q=function(m){function Texts(){return null!==m&&m.apply(this,arguments)||this}return F(Texts,m),Texts}(R.d),D=function(m){function ClassList(){var y=null!==m&&m.apply(this,arguments)||this;return y.autocompleteList="autoComplete autoComplete--tags rlist",y.autocompleteItem="autoComplete__item my-2",y.hidden="hidden",y}return F(ClassList,m),ClassList}(R.d),M=function(m){function Selectors(){var y=null!==m&&m.apply(this,arguments)||this;return y.autoComplete=".autoComplete",y.autoCompleteWrapper=".autoComplete_wrapper",y}return F(Selectors,m),Selectors}(R.f),V=function(m){function Elements(){return null!==m&&m.apply(this,arguments)||this}return F(Elements,m),Elements}(R.b),B=function(){function AdvancedSearchAutoComplete(m,y){this.filters=m,this.stateChanged=y,this.placeHolders=new Map,this.results=[],this.filters=m,this.stateChanged=y,this.autoCompletes=[],this._configs=this.configs}return Object.defineProperty(AdvancedSearchAutoComplete.prototype,"configs",{get:function(){return{maxWords:200,maxChars:222,url:"/action/doSuggest"}},enumerable:!1,configurable:!0}),Object.defineProperty(AdvancedSearchAutoComplete.prototype,"options",{get:function(){return{method:"GET",valueField:"value",autoSelect:!1,allowFreeEntries:!1,displayField:"label",cls:"pr-4"}},enumerable:!1,configurable:!0}),Object.defineProperty(AdvancedSearchAutoComplete.prototype,"localURL",{get:function(){return"/specs/libraries/ui-core/widgets/advanced-search/ajax/data.json"},enumerable:!1,configurable:!0}),AdvancedSearchAutoComplete.prototype.elementRenderer=function(m,y){var b=document.createElement("a");b.href=y.value.url,b.innerHTML="<span>"+y.value.highlight+"</span>",b.className="autoComplete__link",m.setAttribute("aria-label",b.innerText),m.innerHTML="",m.appendChild(b),b.addEventListener("click",(function(m){m.preventDefault()}))},AdvancedSearchAutoComplete.prototype.initialize=function(){this.addEventListeners()},AdvancedSearchAutoComplete.prototype.addEventListeners=function(){this.filters.forEach(this.initAutoComplete.bind(this)),this.autocompleteAnnouncer()},AdvancedSearchAutoComplete.prototype.autocompleteAnnouncer=function(){var m=document.querySelector(".advanced-search__autocomplete__announcer"),y=document.querySelectorAll('[id^="autoComplete_list_"]'),b=new MutationObserver((function(y){y.forEach((function(y){y.target.children.length?m.innerHTML=y.target.children.length+" results are available, use up and down arrow keys to navigate.":m.innerHTML="No results are available."}))}));y.forEach((function(m){b.observe(m,{childList:!0})}))},AdvancedSearchAutoComplete.prototype.urlWithQuery=function(m){var y=m.value.trim().replace(/\s\s+/g," "),b=this.configs,_=b.maxWords,C=b.maxChars,$=b.url;if(y.split(" ").length>=_||y.length>=C)return"";var R=m.dataset,I=R.autoCompleteTarget,P=R.autoCompleteWithin,F="?target="+I+"&query="+encodeURIComponent(y);return P&&(F=F+"&within="+P),""+$+F},AdvancedSearchAutoComplete.prototype.buildConfigs=function(m,y){var b=this;return{data:{src:function(){return __awaiter(b,void 0,void 0,(function(){var y;return __generator(this,(function(b){switch(b.label){case 0:return y=this.urlWithQuery(m),[4,fetch(y)];case 1:return[4,b.sent().json()];case 2:return[2,b.sent()]}}))}))},cache:!1},selector:function(){return m},resultsList:{render:!0,idName:"autoComplete-"+y,class:this.classList.autocompleteList,maxResults:10},resultItem:{class:this.classList.autocompleteItem,element:this.elementRenderer.bind(this)},highlight:!1,sort:!1,threshold:2,preselectedItems:this.itemPreselectedValues(m),searchEngine:null,onTagRemoved:null}},AdvancedSearchAutoComplete.prototype.itemPreselectedValues=function(m){var y=m.dataset.values;return y?JSON.parse(y):[]},AdvancedSearchAutoComplete.prototype.createAutoCompleteInstance=function(m,y){return new P(m,y)},AdvancedSearchAutoComplete.prototype.initAutoComplete=function(m,y){var b,_=this,C=this.buildConfigs(m,y);C.searchEngine=function(m,y){return _.onSearchEngine($,m,y)},C.onTagRemoved=function(){return _.onTagRemoved($)};var $=this.createAutoCompleteInstance(C,m);this.placeHolders.set(m,m.placeholder),this.autoCompletes.push($),null===(b=this.domUtils.closest(this.selectors.autoCompleteWrapper,m))||void 0===b||b.addEventListener("click",this.onAutoCompleteFocus.bind(this,m)),this.onTagValuesChange($),m.addEventListener("blur",this.onBlur.bind(this,$,m)),m.addEventListener("selection",this.onSelection.bind(this,$,m)),m.addEventListener("results",this.onResults.bind(this))},AdvancedSearchAutoComplete.prototype.onSearchEngine=function(m,y,b){return m.tagValues.find((function(m){var y=m[0];return b.value==y.value}))?null:b.highlight||b.label},AdvancedSearchAutoComplete.prototype.onTagRemoved=function(m){this.onTagValuesChange(m),this.stateChanged()},AdvancedSearchAutoComplete.prototype.onAutoCompleteFocus=function(m){m.focus(),m.parentElement.scrollTop=m.parentElement.scrollHeight},AdvancedSearchAutoComplete.prototype.onTagValuesChange=function(m){var y=m.field;m.tagValues.length?(y.removeAttribute("placeholder"),y.style.width="auto"):(y.setAttribute("placeholder",this.placeHolders.get(y)),y.style.width="100%")},AdvancedSearchAutoComplete.prototype.onBlur=function(m,y,b){if(b.relatedTarget&&b.relatedTarget.closest(this.selectors.autoComplete))return y.value=null,void(this.results=[]);if(this.results.length&&1===this.results.length){var _=this.results.pop().value,C=_.label,$=_.value;m.createTagValue(C,$)}y.value="",this.results=[]},AdvancedSearchAutoComplete.prototype.onSelection=function(m,y,b){var _=b.detail.selection.value,C=_.label,$=_.value;m.createTagValue(C,$),y.value="",this.domUtils.toggleClasses(m.tagsPosition,this.classList.hidden,!m.tagValues.length),this.onTagValuesChange(m),this.stateChanged()},AdvancedSearchAutoComplete.prototype.onResults=function(m){var y=m.detail;this.results=y.results},AdvancedSearchAutoComplete=__decorate([Object(R.c)(M,V,D,q),__metadata("design:paramtypes",[Array,Function])],AdvancedSearchAutoComplete)}();y.e=B}}]);
//# sourceMappingURL=vendors~search-fcfbb090fd8fa4ffcb7e.js.map